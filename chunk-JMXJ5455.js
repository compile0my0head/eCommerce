import{a as T}from"./chunk-SFKET6CN.js";import{a as k,b as p,c as F,d as N,e as A,f as x,h as D,i as L,j as O,l as q}from"./chunk-3CLL7LMM.js";import"./chunk-SZXLN6HP.js";import{$a as S,A as b,Aa as s,Ca as C,Ia as y,La as P,W as d,ca as u,ea as g,gb as E,ia as m,ma as n,na as r,oa as f,sa as h,sb as R,ta as _,tb as M,z as v}from"./chunk-ABLYTEQI.js";import"./chunk-EQDQRRRY.js";var G=(t,o)=>({"is-valid":t,"is-invalid":o});function j(t,o){t&1&&(n(0,"p",17),s(1,"This field is required"),r())}function V(t,o){t&1&&(n(0,"p",17),s(1,"Please enter a valid email address"),r())}function z(t,o){if(t&1&&(n(0,"div"),u(1,j,2,0,"p",17)(2,V,2,0,"p",17),r()),t&2){let i,e=_();d(),m((i=e.resetPassword.get("email"))!=null&&i.getError("required")?1:(i=e.resetPassword.get("email"))!=null&&i.getError("email")?2:-1)}}function H(t,o){t&1&&(n(0,"p",17),s(1,"This field is required"),r())}function B(t,o){t&1&&(n(0,"p",17),s(1,"Password must be 6 characters"),r())}function $(t,o){if(t&1&&(n(0,"div"),u(1,H,2,0,"p",17)(2,B,2,0,"p",17),r()),t&2){let i,e=_();d(),m((i=e.resetPassword.get("newPassword"))!=null&&i.getError("required")?1:(i=e.resetPassword.get("newPassword"))!=null&&i.getError("pattern")?2:-1)}}function J(t,o){t&1&&(n(0,"span"),f(1,"i",18),r())}function K(t,o){if(t&1&&(n(0,"div",13),s(1),r()),t&2){let i=_();d(),C(" ",i.errorMsg," ")}}function Q(t,o){t&1&&(n(0,"div",14),s(1," Password reset successfully "),r())}var I=class t{isLoading=!1;successMsg=!1;errorMsg="";_AuthService=v(T);_Router=v(R);resetPassword=new A({email:new x(null,[p.required,p.email]),newPassword:new x(null,[p.required,p.pattern(/^\w{6}$/)])});resetPasswordSubmit(){this.resetPassword.valid?(this.isLoading=!0,this._AuthService.setResetPassword(this.resetPassword.value).subscribe({next:o=>{o.token&&(this.isLoading=!1,this.errorMsg="",this.successMsg=!0,localStorage.removeItem("forgotPasswordToken"),localStorage.removeItem("resetStageAllowed"),setTimeout(()=>this._Router.navigate(["/login"]),1500))},error:o=>{this.errorMsg=o.error.message,this.isLoading=!1}})):this.resetPassword.markAllAsTouched()}static \u0275fac=function(i){return new(i||t)};static \u0275cmp=b({type:t,selectors:[["app-reset-password"]],standalone:!0,features:[y],decls:32,vars:14,consts:[[1,"min-h-screen","flex","flex-col","justify-center","items-center","bg-gradient-to-b","from-purple-900","to-indigo-950","text-white","px-6"],[1,"mb-8","flex","flex-col","items-center"],[1,"w-16","h-16","bg-white/20","rounded-full","flex","items-center","justify-center","text-3xl","font-bold"],[1,"text-white"],[1,"mt-3","text-2xl","font-semibold","tracking-wide"],[1,"bg-white/10","backdrop-blur-xl","rounded-2xl","shadow-2xl","p-8","w-full","max-w-md","border","border-white/10"],[1,"text-xl","font-bold","text-center","mb-2"],[1,"text-center","text-gray-300","mb-6"],[1,"space-y-5",3,"ngSubmit","formGroup"],[1,"block","mb-1","text-sm","text-gray-300"],["id","email","type","email","formControlName","email","placeholder","Enter your email address",1,"w-full","px-4","py-2","rounded-xl","bg-white/20","text-white","placeholder-gray-400","focus:outline-none","focus:ring-2","focus:ring-purple-500","transition",3,"ngClass"],["id","newPassword","type","password","formControlName","newPassword","placeholder","Enter your new password",1,"w-full","px-4","py-2","rounded-xl","bg-white/20","text-white","placeholder-gray-400","focus:outline-none","focus:ring-2","focus:ring-purple-500","transition",3,"ngClass"],["type","submit",1,"w-full","mt-3","py-2","bg-purple-600","hover:bg-purple-700","rounded-xl","font-semibold","text-white","transition","transform","hover:scale-[1.02]","active:scale-95"],[1,"mt-4","rounded-xl","bg-rose-100/70","border","border-rose-300/50","text-rose-700","text-sm","px-4","py-3","shadow-sm","backdrop-blur-sm","animate-fadeIn","text-center"],[1,"mt-4","rounded-xl","bg-green-100/70","border","border-green-300/50","text-green-800","text-sm","px-4","py-3","shadow-sm","backdrop-blur-sm","animate-fadeIn","text-center"],[1,"text-sm","text-center","text-gray-300","mt-6"],["routerLink","/login",1,"text-purple-400","hover:text-purple-300","underline"],[1,"text-red-400"],[1,"fas","fa-spin","fa-spinner","text-red-300"]],template:function(i,e){if(i&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"span",3),s(4,"\u{1F6CD}\uFE0F"),r()(),n(5,"h1",4),s(6,"MyShop"),r()(),n(7,"div",5)(8,"h2",6),s(9,"Reset Password"),r(),n(10,"p",7),s(11,"Enter your new password below"),r(),n(12,"form",8),h("ngSubmit",function(){return e.resetPasswordSubmit()}),n(13,"div")(14,"label",9),s(15,"Email Address"),r(),f(16,"input",10),u(17,z,3,1,"div"),r(),n(18,"div")(19,"label",9),s(20,"New Password"),r(),f(21,"input",11),u(22,$,3,1,"div"),r(),n(23,"button",12),u(24,J,2,0,"span"),s(25," Reset Password "),r(),u(26,K,2,1,"div",13)(27,Q,2,0,"div",14),r(),n(28,"p",15),s(29," Back to "),n(30,"a",16),s(31,"Login"),r()()()()),i&2){let a,w,l,c;d(12),g("formGroup",e.resetPassword),d(4),g("ngClass",P(8,G,!((a=e.resetPassword.get("email"))!=null&&a.errors)&&(((a=e.resetPassword.get("email"))==null?null:a.dirty)||((a=e.resetPassword.get("email"))==null?null:a.touched)),((a=e.resetPassword.get("email"))==null?null:a.errors)&&(((a=e.resetPassword.get("email"))==null?null:a.dirty)||((a=e.resetPassword.get("email"))==null?null:a.touched)))),d(),m((w=e.resetPassword.get("email"))!=null&&w.errors&&((w=e.resetPassword.get("email"))!=null&&w.touched)?17:-1),d(4),g("ngClass",P(11,G,!((l=e.resetPassword.get("newPassword"))!=null&&l.errors)&&(((l=e.resetPassword.get("newPassword"))==null?null:l.dirty)||((l=e.resetPassword.get("newPassword"))==null?null:l.touched)),((l=e.resetPassword.get("newPassword"))==null?null:l.errors)&&(((l=e.resetPassword.get("newPassword"))==null?null:l.dirty)||((l=e.resetPassword.get("newPassword"))==null?null:l.touched)))),d(),m((c=e.resetPassword.get("newPassword"))!=null&&c.errors&&((c=e.resetPassword.get("newPassword"))!=null&&c.touched)?22:-1),d(2),m(e.isLoading?24:-1),d(2),m(e.errorMsg?26:-1),d(),m(e.successMsg?27:-1)}},dependencies:[E,S,q,D,k,F,N,L,O,M],styles:[".is-valid[_ngcontent-%COMP%]{--tw-border-opacity: 1;border-color:rgb(74 222 128 / var(--tw-border-opacity, 1));background-color:#14532d33;--tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(1px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow, 0 0 #0000);--tw-ring-color: rgb(74 222 128 / .5);transition-property:all;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.3s}@keyframes _ngcontent-%COMP%_pulse{50%{opacity:.5}}.is-invalid[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_pulse 2s cubic-bezier(.4,0,.6,1) infinite;--tw-border-opacity: 1;border-color:rgb(248 113 113 / var(--tw-border-opacity, 1));background-color:#ef444433;--tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(1px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow, 0 0 #0000);--tw-ring-color: rgb(248 113 113 / .5);animation:_ngcontent-%COMP%_pulse 1.5s ease-in-out infinite}.animate-pulse[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_pulse 1.5s ease-in-out infinite}"]})};export{I as ResetPasswordComponent};
