import{a as J}from"./chunk-Z3TLLND5.js";import{a as G,b as f,c as R,d as j,e as $,f as b,h as H,i as P,j as U,l as z}from"./chunk-3CLL7LMM.js";import{a as B}from"./chunk-RUKYRDPX.js";import"./chunk-SZXLN6HP.js";import{$a as q,A as N,Aa as l,Ba as L,Ca as T,H as S,I as E,Ia as D,La as v,W as d,ca as p,ea as h,gb as I,ia as m,ka as k,la as M,ma as n,na as i,oa as u,ra as w,sa as C,sb as O,ta as g,z as A}from"./chunk-ABLYTEQI.js";import"./chunk-EQDQRRRY.js";var Q=(e,r)=>r._id,V=(e,r)=>({"is-valid":e,"is-invalid":r});function W(e,r){e&1&&(n(0,"span"),u(1,"i",10),l(2,"Cancel"),i())}function X(e,r){e&1&&(n(0,"span"),u(1,"i",11),l(2,"Add Address"),i())}function Y(e,r){e&1&&(n(0,"p",21),l(1,"This field is required"),i())}function Z(e,r){e&1&&(n(0,"p",21),l(1,"Name must have at least 3 characters"),i())}function ee(e,r){e&1&&(n(0,"p",21),l(1,"Name can't exceed 20 characters"),i())}function te(e,r){if(e&1&&(n(0,"div"),p(1,Y,2,0,"p",21)(2,Z,2,0,"p",21)(3,ee,2,0,"p",21),i()),e&2){let t,o=g(2);d(),m((t=o.addressForm.get("name"))!=null&&t.getError("required")?1:(t=o.addressForm.get("name"))!=null&&t.getError("minlength")?2:(t=o.addressForm.get("name"))!=null&&t.getError("maxlength")?3:-1)}}function ie(e,r){e&1&&(n(0,"p",21),l(1,"This field is required"),i())}function ne(e,r){e&1&&(n(0,"p",21),l(1,"City must have at least 3 characters"),i())}function re(e,r){if(e&1&&(n(0,"div"),p(1,ie,2,0,"p",21)(2,ne,2,0,"p",21),i()),e&2){let t,o=g(2);d(),m((t=o.addressForm.get("city"))!=null&&t.getError("required")?1:(t=o.addressForm.get("city"))!=null&&t.getError("minlength")?2:-1)}}function se(e,r){e&1&&(n(0,"p",21),l(1,"This field is required"),i())}function oe(e,r){e&1&&(n(0,"p",21),l(1,"Details must have at least 10 characters"),i())}function le(e,r){if(e&1&&(n(0,"div"),p(1,se,2,0,"p",21)(2,oe,2,0,"p",21),i()),e&2){let t,o=g(2);d(),m((t=o.addressForm.get("details"))!=null&&t.getError("required")?1:(t=o.addressForm.get("details"))!=null&&t.getError("minlength")?2:-1)}}function de(e,r){e&1&&(n(0,"p",21),l(1,"This field is required"),i())}function ae(e,r){e&1&&(n(0,"p",21),l(1,"Enter a valid phone number"),i())}function me(e,r){if(e&1&&(n(0,"div"),p(1,de,2,0,"p",21)(2,ae,2,0,"p",21),i()),e&2){let t,o=g(2);d(),m((t=o.addressForm.get("phone"))!=null&&t.getError("required")?1:(t=o.addressForm.get("phone"))!=null&&t.getError("pattern")?2:-1)}}function ue(e,r){e&1&&(n(0,"span"),u(1,"i",22),i())}function pe(e,r){if(e&1&&(n(0,"div",20),l(1),i()),e&2){let t=g(2);d(),T(" ",t.errorMsg," ")}}function ce(e,r){if(e&1){let t=w();n(0,"div",6)(1,"h2",12),l(2,"Add New Address"),i(),n(3,"form",13),C("ngSubmit",function(){S(t);let a=g();return E(a.addAddressSubmit())}),n(4,"div")(5,"label",14),l(6,"Address Name"),i(),u(7,"input",15),i(),p(8,te,4,1,"div"),n(9,"div")(10,"label",14),l(11,"City"),i(),u(12,"input",16),i(),p(13,re,3,1,"div"),n(14,"div")(15,"label",14),l(16,"Details"),i(),u(17,"textarea",17),i(),p(18,le,3,1,"div"),n(19,"div")(20,"label",14),l(21,"Phone Number"),i(),u(22,"input",18),i(),p(23,me,3,1,"div"),n(24,"button",19),p(25,ue,2,0,"span"),l(26," Add Address "),i(),p(27,pe,2,1,"div",20),i()()}if(e&2){let t,o,a,x,c,y,_,F,s=g();d(3),h("formGroup",s.addressForm),d(4),h("ngClass",v(11,V,!((t=s.addressForm.get("name"))!=null&&t.errors)&&(((t=s.addressForm.get("name"))==null?null:t.dirty)||((t=s.addressForm.get("name"))==null?null:t.touched)),((t=s.addressForm.get("name"))==null?null:t.errors)&&(((t=s.addressForm.get("name"))==null?null:t.dirty)||((t=s.addressForm.get("name"))==null?null:t.touched)))),d(),m((o=s.addressForm.get("name"))!=null&&o.errors&&((o=s.addressForm.get("name"))!=null&&o.touched)?8:-1),d(4),h("ngClass",v(14,V,!((a=s.addressForm.get("city"))!=null&&a.errors)&&(((a=s.addressForm.get("city"))==null?null:a.dirty)||((a=s.addressForm.get("city"))==null?null:a.touched)),((a=s.addressForm.get("city"))==null?null:a.errors)&&(((a=s.addressForm.get("city"))==null?null:a.dirty)||((a=s.addressForm.get("city"))==null?null:a.touched)))),d(),m((x=s.addressForm.get("city"))!=null&&x.errors&&((x=s.addressForm.get("city"))!=null&&x.touched)?13:-1),d(4),h("ngClass",v(17,V,!((c=s.addressForm.get("details"))!=null&&c.errors)&&(((c=s.addressForm.get("details"))==null?null:c.dirty)||((c=s.addressForm.get("details"))==null?null:c.touched)),((c=s.addressForm.get("details"))==null?null:c.errors)&&(((c=s.addressForm.get("details"))==null?null:c.dirty)||((c=s.addressForm.get("details"))==null?null:c.touched)))),d(),m((y=s.addressForm.get("details"))!=null&&y.errors&&((y=s.addressForm.get("details"))!=null&&y.touched)?18:-1),d(4),h("ngClass",v(20,V,!((_=s.addressForm.get("phone"))!=null&&_.errors)&&(((_=s.addressForm.get("phone"))==null?null:_.dirty)||((_=s.addressForm.get("phone"))==null?null:_.touched)),((_=s.addressForm.get("phone"))==null?null:_.errors)&&(((_=s.addressForm.get("phone"))==null?null:_.dirty)||((_=s.addressForm.get("phone"))==null?null:_.touched)))),d(),m((F=s.addressForm.get("phone"))!=null&&F.errors&&((F=s.addressForm.get("phone"))!=null&&F.touched)?23:-1),d(2),m(s.isLoading?25:-1),d(2),m(s.errorMsg?27:-1)}}function _e(e,r){e&1&&(n(0,"div",7),u(1,"i",23),i())}function ge(e,r){if(e&1){let t=w();n(0,"div",8)(1,"div",24),l(2,"\u{1F4CD}"),i(),n(3,"p",25),l(4,"No addresses found"),i(),n(5,"button",26),C("click",function(){S(t);let a=g();return E(a.toggleForm())}),l(6," Add your first address "),i()()}}function fe(e,r){if(e&1){let t=w();n(0,"div",27)(1,"div",28)(2,"div",29)(3,"div",30),u(4,"i",31),i(),n(5,"h3",32),l(6),i()(),n(7,"button",33),C("click",function(){let a=S(t).$implicit,x=g(2);return E(x.removeAddress(a._id,a.name))}),u(8,"i",34),i()(),n(9,"div",35)(10,"p",29),u(11,"i",36),l(12),i(),n(13,"p",37),u(14,"i",38),n(15,"span",39),l(16),i()(),n(17,"p",29),u(18,"i",40),l(19),i()()()}if(e&2){let t=r.$implicit;d(6),L(t.name),d(6),T("",t.city," "),d(4),L(t.details),d(3),T("",t.phone," ")}}function xe(e,r){if(e&1&&(n(0,"div",9),k(1,fe,20,4,"div",27,Q),i()),e&2){let t=g();d(),M(t.addressesList)}}var K=class e{isLoading=!1;isFormVisible=!1;errorMsg="";addressesList=[];_AddressesService=A(J);_Alert=A(B);_Router=A(O);getUserAddressesSubscription;addAddressSubscription;removeAddressSubscription;addressForm=new $({name:new b(null,[f.required,f.minLength(3),f.maxLength(20)]),details:new b(null,[f.required,f.minLength(10)]),phone:new b(null,[f.required,f.pattern(/^01[0125][0-9]{8}$/)]),city:new b(null,[f.required,f.minLength(3)])});ngOnInit(){this.loadAddresses()}loadAddresses(){this.isLoading=!0,this.getUserAddressesSubscription=this._AddressesService.getUserAddresses().subscribe({next:r=>{this.addressesList=r.data||[],this.isLoading=!1},error:r=>{this.errorMsg=r.error.message||"Failed to load addresses",this.isLoading=!1}})}toggleForm(){this.isFormVisible=!this.isFormVisible,this.isFormVisible||(this.addressForm.reset(),this.errorMsg="")}addAddressSubmit(){this.addressForm.valid?(this.isLoading=!0,this.addAddressSubscription=this._AddressesService.addAddress(this.addressForm.value).subscribe({next:r=>{r.status==="success"&&(this.isLoading=!1,this.errorMsg="",this._Alert.toast("Address added successfully","success"),this.addressForm.reset(),this.isFormVisible=!1,this.loadAddresses())},error:r=>{this.errorMsg=r.error.message,this.isLoading=!1}})):this.addressForm.markAllAsTouched()}removeAddress(r,t){this.removeAddressSubscription=this._AddressesService.removeAddress(r).subscribe({next:o=>{this._Alert.toast(`"${t}" address removed`,"success"),this.loadAddresses()},error:()=>{this._Alert.toast("Failed to remove address","error")}})}ngOnDestroy(){this.getUserAddressesSubscription?.unsubscribe(),this.addAddressSubscription?.unsubscribe(),this.removeAddressSubscription?.unsubscribe()}static \u0275fac=function(t){return new(t||e)};static \u0275cmp=N({type:e,selectors:[["app-addresses"]],standalone:!0,features:[D],decls:15,vars:5,consts:[[1,"min-h-screen","bg-gradient-to-b","from-[#0c021a]","via-[#1a0f2d]","to-[#251a3f]","text-gray-100","flex","items-center"],[1,"container","mx-auto","max-w-5xl","px-6","py-24"],[1,"flex","justify-between","items-center","mb-6"],[1,"text-2xl","font-bold","text-white","mb-1"],[1,"text-sm","text-gray-400"],[1,"px-5","py-2.5","bg-violet-600","hover:bg-violet-700","rounded-lg","font-medium","text-white","transition","cursor-pointer","shadow-md","hover:shadow-lg",3,"click"],[1,"bg-white/10","backdrop-blur-xl","rounded-xl","shadow-lg","p-6","mb-6","border","border-white/10"],[1,"flex","items-center","justify-center","py-20"],[1,"text-center","py-20"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4"],[1,"fas","fa-times","mr-2"],[1,"fas","fa-plus","mr-2"],[1,"text-lg","font-bold","mb-4"],[1,"space-y-5",3,"ngSubmit","formGroup"],[1,"block","mb-1","text-sm","text-gray-300"],["formControlName","name","type","text","placeholder","e.g., Home, Office",1,"w-full","px-4","py-2","rounded-xl","bg-white/20","text-white","placeholder-gray-400","focus:outline-none","focus:ring-2","focus:ring-purple-500","transition",3,"ngClass"],["formControlName","city","type","text","placeholder","Enter your city",1,"w-full","px-4","py-2","rounded-xl","bg-white/20","text-white","placeholder-gray-400","focus:outline-none","focus:ring-2","focus:ring-purple-500","transition",3,"ngClass"],["formControlName","details","rows","3","placeholder","Enter detailed address",1,"w-full","px-4","py-2","rounded-xl","bg-white/20","text-white","placeholder-gray-400","focus:outline-none","focus:ring-2","focus:ring-purple-500","transition","resize-none",3,"ngClass"],["formControlName","phone","type","tel","placeholder","Enter your phone number",1,"w-full","px-4","py-2","rounded-xl","bg-white/20","text-white","placeholder-gray-400","focus:outline-none","focus:ring-2","focus:ring-purple-500","transition",3,"ngClass"],["type","submit",1,"w-full","mt-3","py-2","bg-purple-600","hover:bg-purple-700","rounded-xl","font-semibold","text-white","transition","transform","hover:scale-[1.02]","active:scale-95","cursor-pointer"],[1,"mt-4","rounded-xl","bg-rose-100/70","border","border-rose-300/50","text-rose-700","text-sm","px-4","py-3","shadow-sm","backdrop-blur-sm","animate-fadeIn","text-center"],[1,"text-red-400"],[1,"fas","fa-spin","fa-spinner","text-white"],[1,"fas","fa-spinner","fa-spin","text-violet-300","text-2xl"],[1,"text-5xl","mb-4"],[1,"text-gray-300","mb-6"],[1,"px-6","py-2","bg-violet-600","hover:bg-violet-700","rounded-lg","text-white","transition","cursor-pointer",3,"click"],[1,"bg-white/5","backdrop-blur-sm","rounded-lg","p-4","border","border-white/10","hover:border-violet-500/50","transition-all","duration-300","group"],[1,"flex","justify-between","items-start","mb-3"],[1,"flex","items-center","gap-2"],[1,"w-8","h-8","rounded-lg","bg-violet-600/20","flex","items-center","justify-center"],[1,"fas","fa-map-marker-alt","text-sm","text-violet-400"],[1,"text-base","font-semibold","text-white"],[1,"text-rose-400","hover:text-rose-300","transition","cursor-pointer","opacity-0","group-hover:opacity-100",3,"click"],[1,"fas","fa-trash","text-sm"],[1,"space-y-1.5","text-sm","text-gray-300","pl-10"],[1,"fas","fa-city","text-xs","text-violet-400","w-4"],[1,"flex","items-start","gap-2"],[1,"fas","fa-home","text-xs","text-violet-400","w-4","mt-0.5"],[1,"flex-1"],[1,"fas","fa-phone","text-xs","text-violet-400","w-4"]],template:function(t,o){t&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"div")(4,"h1",3),l(5,"My Addresses"),i(),n(6,"p",4),l(7,"Manage your delivery locations"),i()(),n(8,"button",5),C("click",function(){return o.toggleForm()}),p(9,W,3,0,"span")(10,X,3,0,"span"),i()(),p(11,ce,28,23,"div",6)(12,_e,2,0,"div",7)(13,ge,7,0,"div",8)(14,xe,3,0,"div",9),i()()),t&2&&(d(9),m(o.isFormVisible?9:10),d(2),m(o.isFormVisible?11:-1),d(),m(o.isLoading&&!o.isFormVisible?12:-1),d(),m(!o.isLoading&&o.addressesList.length===0&&!o.isFormVisible?13:-1),d(),m(!o.isLoading&&o.addressesList.length>0?14:-1))},dependencies:[I,q,z,H,G,R,j,P,U],styles:[".is-valid[_ngcontent-%COMP%]{border:1px solid #10b981}.is-invalid[_ngcontent-%COMP%]{border:1px solid #ef4444}"]})};export{K as AddressesComponent};
