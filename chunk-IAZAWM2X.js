import{a as D}from"./chunk-GJUGTRZB.js";import{a as R}from"./chunk-RUKYRDPX.js";import"./chunk-SZXLN6HP.js";import{A as b,Aa as r,Ca as u,H as m,I as d,Ia as E,Ka as I,T as h,W as c,ca as y,ea as v,ia as w,ka as S,la as k,ma as e,na as i,oa as p,ra as C,sa as x,sb as T,ta as s,tb as V,z as f}from"./chunk-ABLYTEQI.js";import"./chunk-EQDQRRRY.js";var A=(o,n)=>n._id,P=o=>["/orders",o];function j(o,n){if(o&1){let t=C();e(0,"div",6)(1,"div",16),p(2,"img",17),i(),e(3,"div",18)(4,"h2",19),r(5),i(),e(6,"p",20),r(7," Brand: "),e(8,"span",21),r(9),i()(),e(10,"p",20),r(11," Category: "),e(12,"span",21),r(13),i()(),e(14,"div",22)(15,"span",20),r(16,"Quantity:"),i(),e(17,"div",23)(18,"button",24),x("click",function(){let a=m(t).$implicit,_=s(2);return d(_.updateItemQuantity(a.product.id,a.count-1))}),p(19,"i",25),i(),e(20,"span",26),r(21),i(),e(22,"button",24),x("click",function(){let a=m(t).$implicit,_=s(2);return d(_.updateItemQuantity(a.product.id,a.count+1))}),p(23,"i",27),i()()()(),e(24,"div",28)(25,"p",29)(26,"span",20),r(27,"Price:"),i(),r(28),i(),e(29,"button",30),x("click",function(){let a=m(t).$implicit,_=s(2);return d(_.onRemoveItem(a.product.id))}),p(30,"i",31),i()()()}if(o&2){let t=n.$implicit;c(2),v("src",t.product.imageCover,h)("alt",t.product.title),c(3),u(" ",t.product.title," "),c(4),u(" ",t.product.brand.name," "),c(4),u(" ",t.product.category.name," "),c(8),u(" ",t.count," "),c(7),u(" $",t.price*t.count," ")}}function F(o,n){if(o&1){let t=C();e(0,"div",4)(1,"div",5),S(2,j,31,7,"div",6,A),i()(),e(4,"div",7)(5,"p",8)(6,"span",9),r(7,"Total Price:"),i(),e(8,"span",10),r(9),i()(),e(10,"div",11)(11,"button",12),x("click",function(){m(t);let a=s();return d(a.goBackToShopping())}),r(12," \u2190 Continue Shopping "),i(),e(13,"button",13),x("click",function(){m(t);let a=s();return d(a.clearCart())}),p(14,"i",14),r(15," Clear Cart "),i(),e(16,"button",15),r(17," Proceed to Checkout \u2192 "),i()()()}if(o&2){let t=s();c(2),k(t.cartDetails.products),c(7),u(" $",t.cartDetails.totalCartPrice," "),c(7),v("routerLink",I(2,P,t.cartDetails._id))}}function $(o,n){if(o&1){let t=C();e(0,"div",3),p(1,"i",32),e(2,"p",33),r(3,"Your cart is empty."),i(),e(4,"button",34),x("click",function(){m(t);let a=s();return d(a.goBackToShopping())}),r(5," Continue Shopping "),i()()}}var g=class o{_CartService=f(D);_Router=f(T);_Alert=f(R);cartDetails={};ngOnInit(){this._CartService.getCartProducts().subscribe({next:n=>this.cartDetails=n.data,error:n=>console.error(n)})}goBackToShopping(){this._Router.navigate(["/home"])}onRemoveItem(n){this._CartService.removeSpecificCartProduct(n).subscribe({next:t=>{this.cartDetails=t.data,this._CartService.cartItemCount.next(t.numOfCartItems),this._Alert.toast("Item removed from cart","info")},error:t=>console.error(t)})}updateItemQuantity(n,t){t>0&&this._CartService.updateProductQuantity(n,t).subscribe({next:l=>{this.cartDetails=l.data,this._Alert.toast("Quantity updated","success")},error:l=>console.error(l)})}clearCart(){this._Alert.confirmClearCart().subscribe(n=>{n&&this._CartService.clearCart().subscribe({next:t=>{t.message==="success"&&(this.cartDetails={_id:"",cartOwner:"",products:[],createdAt:"",updatedAt:"",__v:0,totalCartPrice:0},this._CartService.cartItemCount.next(0),this._Alert.clearedCart())},error:t=>console.error(t)})})}static \u0275fac=function(t){return new(t||o)};static \u0275cmp=b({type:o,selectors:[["app-cart"]],standalone:!0,features:[E],decls:6,vars:1,consts:[[1,"min-h-screen","flex","flex-col","justify-center","bg-[#0f071b]","text-gray-100","pt-28","pb-12","px-4"],[1,"max-w-6xl","mx-auto","space-y-8","w-full"],[1,"text-3xl","font-bold","text-center","text-violet-200","mb-10"],[1,"flex","flex-col","items-center","justify-center","text-center","py-32","text-gray-400","min-h-[60vh]"],[1,"flex","flex-col","justify-center","bg-[#1b1330]/60","border","border-white/10","rounded-2xl","p-6","shadow-[0_0_40px_-12px_rgba(165,125,255,0.3)]","mx-auto","w-full","max-w-5xl"],[1,"grid","grid-cols-1","divide-y","divide-white/10"],[1,"py-6","px-3","grid","grid-cols-1","sm:grid-cols-[auto,1fr,auto]","gap-6","items-center"],[1,"flex","flex-col","sm:flex-row","justify-between","items-center","mt-10","gap-4","max-w-5xl","mx-auto"],[1,"text-xl","font-semibold","text-violet-200","bg-[#1b1330]/60","px-6","py-3","rounded-lg","border","border-violet-400/30","shadow-[0_0_15px_-5px_rgba(165,125,255,0.4)]"],[1,"text-white"],[1,"text-violet-300","font-bold","ml-2"],[1,"flex","flex-col","sm:flex-row","gap-4"],[1,"px-8","py-3","rounded-lg","bg-transparent","border","border-violet-300","text-violet-300","hover:bg-violet-300","hover:text-gray-900","transition-all","duration-300",3,"click"],[1,"px-8","py-3","rounded-lg","bg-transparent","border","border-red-400","text-red-400","hover:bg-red-400","hover:text-gray-900","transition-all","duration-300",3,"click"],[1,"fas","fa-trash-alt","mr-2"],[1,"px-8","py-3","rounded-lg","bg-violet-500","text-white","hover:bg-violet-400","transition-all","duration-300","shadow-[0_0_20px_-5px_rgba(165,125,255,0.5)]",3,"routerLink"],[1,"w-full","sm:w-28","h-28","flex-shrink-0","mx-auto","sm:mx-0"],[1,"w-full","h-full","object-cover","rounded-lg","border","border-white/10",3,"src","alt"],[1,"flex","flex-col","gap-2"],[1,"text-lg","font-semibold","text-white","line-clamp-1"],[1,"text-sm","text-gray-400"],[1,"text-gray-200","font-medium"],[1,"flex","items-center","gap-4","mt-2"],[1,"flex","items-center","gap-2","bg-[#120b23]","border","border-white/10","rounded-lg","px-2","py-1"],[1,"text-gray-300","hover:text-violet-400","transition",3,"click"],[1,"fas","fa-minus"],[1,"px-3","text-white","font-semibold","select-none"],[1,"fas","fa-plus"],[1,"flex","flex-col","items-end","justify-between","h-full","gap-4"],[1,"text-lg","font-semibold","text-violet-300"],[1,"text-gray-400","hover:text-red-500","transition",3,"click"],[1,"fas","fa-trash-alt","text-lg"],[1,"fas","fa-shopping-cart","text-6xl","mb-6","text-gray-500/70"],[1,"text-lg"],[1,"mt-6","px-6","py-3","bg-violet-500","text-white","rounded-lg","hover:bg-violet-400","transition-all","duration-300",3,"click"]],template:function(t,l){t&1&&(e(0,"section",0)(1,"div",1)(2,"h1",2),r(3," Cart "),i(),y(4,F,18,4)(5,$,6,0,"div",3),i()()),t&2&&(c(4),w(l.cartDetails.products.length>0?4:5))},dependencies:[V]})};var G=[{path:"",component:g}];export{G as CART_ROUTES};
