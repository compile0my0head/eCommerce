import{a as V}from"./chunk-3JAUR3ZF.js";import{a as O}from"./chunk-GJUGTRZB.js";import{a as L}from"./chunk-BKC52ORT.js";import{a as N}from"./chunk-RUKYRDPX.js";import"./chunk-SZXLN6HP.js";import{$a as j,A as u,Aa as a,Ba as F,Ca as c,H as _,I as b,Ia as g,Ja as E,La as R,S as w,T as y,W as s,aa as D,ca as S,da as k,ea as f,ia as P,ja as W,ka as I,la as A,ma as r,na as n,oa as p,qb as M,ra as T,sa as C,sb as $,ta as m,z as d}from"./chunk-ABLYTEQI.js";import"./chunk-EQDQRRRY.js";var q=()=>[1,2,3,4,5],G=(o,e)=>({"border-violet-400 bg-[#1b1330]/80 text-violet-300 hover:bg-violet-600 hover:text-white":o,"border-pink-400 bg-pink-500/20 text-pink-300 hover:bg-pink-500 hover:text-white":e});function H(o,e){if(o&1&&p(0,"i",11),o&2){let t=e.$implicit,i=m(2);k("style",i.starFill(i.productDetails.ratingsAverage,t),w)}}function J(o,e){if(o&1){let t=T();r(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3),p(4,"img",4),n()(),r(5,"div",5)(6,"div",6)(7,"h2",7),a(8),n(),r(9,"h3",8),a(10),n(),r(11,"p",9),a(12),n(),r(13,"div",10),I(14,H,1,1,"i",11,W),r(16,"span",12),a(17),n()()(),r(18,"div",13)(19,"div")(20,"p",14),a(21," Price "),n(),r(22,"span",15),a(23),n()(),r(24,"div",16)(25,"button",17),C("click",function(){_(t);let l=m();return b(l.onAddToCart(l.productDetails._id,l.productDetails.title))}),p(26,"i",18),r(27,"span"),a(28,"Add to Cart"),n()(),r(29,"button",19),C("click",function(){_(t);let l=m();return b(l.toggleWishlist(l.productDetails._id,l.productDetails.title))}),p(30,"i",20),r(31,"span"),a(32),n()()()()()()()}if(o&2){let t=m();s(4),f("src",t.productDetails.imageCover,y)("alt",t.productDetails.title),s(4),c(" ",t.productDetails.title," "),s(2),c(" ",t.productDetails.category.name," "),s(2),c(" ",t.productDetails.description," "),s(2),A(E(10,q)),s(3),c(" ",t.productDetails.ratingsAverage.toFixed(1)||"\u2014"," "),s(6),c(" $",t.productDetails.price," "),s(6),f("ngClass",R(11,G,!t.isWishlisted(),t.isWishlisted())),s(),f("ngClass",t.isWishlisted()?"fas":"far"),s(2),F(t.isWishlisted()?"Wishlisted":"Add to Wishlist")}}var x=class o{_ProductsService=d(V);_ActivatedRoute=d(M);_CartService=d(O);_Alert=d(N);_Router=d($);_Wishlist=d(L);productDetails=null;isWishlisted=D(!1);ngOnInit(){this._ActivatedRoute.paramMap.subscribe({next:e=>{let t=e.get("id");t&&this._ProductsService.getProduct(t).subscribe({next:i=>{console.log(i.data),this.productDetails=i.data,localStorage.getItem("userToken")&&this._Wishlist.getWishlist().subscribe({next:l=>{let U=(l?.data||[]).map(v=>v?._id||v?.id||v?.product?._id).filter(Boolean);this.isWishlisted.set(U.includes(this.productDetails._id))}})},error:i=>console.log(i)})},error:e=>console.log(e)})}starFill(e,t){let i=Math.min(Math.max(e-(t-1),0),1)*100;return`
      background: linear-gradient(90deg, #facc15 ${i}%, #d1d5db ${i}%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    `}onAddToCart(e,t){if(!localStorage.getItem("userToken")){this._Router.navigate(["login"]);return}this._CartService.addProductToCart(e).subscribe({next:i=>{this._CartService.cartItemCount.next(i.numOfCartItems),this._Alert.toast(`"${t}"<br> Added To Cart`,"success")},error:()=>{this._Alert.toast("Failed to add item","error")}})}toggleWishlist(e,t){if(!localStorage.getItem("userToken")){this._Router.navigate(["login"]);return}!this.isWishlisted()?this._Wishlist.addToWishlist(e).subscribe({next:()=>{this.isWishlisted.set(!0),this._Alert.toast(`"${t}" added to wishlist \u2764\uFE0F`,"success")},error:()=>this._Alert.toast("Failed to add to wishlist","error")}):this._Wishlist.removeFromWishlist(e).subscribe({next:()=>{this.isWishlisted.set(!1),this._Alert.toast(`"${t}" removed from wishlist`,"info")},error:()=>this._Alert.toast("Failed to remove from wishlist","error")})}static \u0275fac=function(t){return new(t||o)};static \u0275cmp=u({type:o,selectors:[["app-product-details"]],standalone:!0,features:[g],decls:1,vars:1,consts:[[1,"min-h-screen","flex","items-center","justify-center","bg-gradient-to-b","from-[#0f071b]","via-[#120b23]","to-[#1b1430]","text-gray-100","py-16","px-4"],[1,"mt-5","container","mx-auto","grid","md:grid-cols-2","gap-10","items-start","bg-[#1b1330]/40","border","border-white/10","rounded-2xl","shadow-[0_0_40px_-10px_rgba(165,125,255,0.25)]","p-8"],[1,"flex","justify-center"],[1,"w-[70%]","md:w-[60%]","lg:w-[55%]","aspect-[3/4]","overflow-hidden","rounded-xl","border","border-white/10","shadow-[0_0_25px_-8px_rgba(165,125,255,0.25)]","bg-[#120b23]/40"],[1,"w-full","h-full","object-cover","transition-transform","duration-700","hover:scale-105",3,"src","alt"],[1,"flex","flex-col","justify-between","h-full"],[1,"space-y-6"],[1,"text-3xl","md:text-4xl","font-bold","leading-snug"],[1,"text-sm","font-medium","text-violet-300","uppercase","tracking-wide"],[1,"text-gray-300","text-lg","leading-relaxed"],[1,"flex","items-center","gap-2"],[1,"fas","fa-star","text-lg"],[1,"text-sm","text-gray-400","ml-2"],[1,"pt-6","mt-8","border-t","border-white/10","space-y-6"],[1,"text-sm","text-violet-300","uppercase","tracking-widest","mb-1"],[1,"text-2xl","font-bold","text-white","block","bg-gradient-to-r","from-violet-400","to-pink-300","bg-clip-text","text-transparent","drop-shadow-[0_0_6px_rgba(165,125,255,0.25)]"],[1,"flex","flex-col","gap-4"],[1,"w-full","py-4","bg-white","text-gray-900","rounded-lg","font-semibold","shadow-md","hover:bg-violet-200","transition-all","duration-300","flex","items-center","justify-center","gap-2",3,"click"],[1,"fas","fa-cart-plus","text-lg"],[1,"w-full","py-4","border","rounded-lg","font-semibold","transition-all","duration-300","flex","items-center","justify-center","gap-2","cursor-pointer",3,"click","ngClass"],[1,"fa-heart",3,"ngClass"]],template:function(t,i){t&1&&S(0,J,33,14,"section",0),t&2&&P(i.productDetails?0:-1)},dependencies:[j]})};var h=class o{static \u0275fac=function(t){return new(t||o)};static \u0275cmp=u({type:o,selectors:[["app-product-list"]],standalone:!0,features:[g],decls:2,vars:0,template:function(t,i){t&1&&(r(0,"p"),a(1,"product-list works!"),n())}})};var lt=[{path:"",component:h},{path:"product-details/:id",component:x}];export{lt as PRODUCTS_ROUTES};
