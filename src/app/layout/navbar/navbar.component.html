<nav
  [class.scrolled]="isScrolledDown"
  [class.hidden-nav]="isHidden"
  class="navbar-custom fixed top-0 left-0 w-full z-50 backdrop-blur-md bg-[#0e071a]/70 border-b border-white/10 transition-all duration-500 ease-in-out"
>
  <div
    class="nav-content max-w-7xl mx-auto flex items-center gap-4 px-6 py-4 transition-all duration-300"
  >
    <!-- Logo -->
    <a
      routerLink="/"
      class="logo text-2xl font-extrabold tracking-wide text-violet-400 hover:text-violet-300 transition-colors duration-300"
    >
      eShop
    </a>

    <!-- Search box (wider) -->
    <div class="relative hidden md:block flex-1 mx-4 max-w-3xl">
      <input
        type="text"
        [(ngModel)]="searchTerm"
        (input)="onSearchChange()"
        placeholder="Search for products..."
        class="w-full bg-gray-900/70 text-gray-200 rounded-full px-5 py-2.5 pl-10 focus:outline-none focus:ring-2 focus:ring-violet-500 transition-all duration-300"
      />
      <span class="absolute left-3 top-2.5 text-gray-400">
        <i class="fa fa-search"></i>
      </span>
    </div>

    <!-- Primary nav links (Home/Categories) -->
    <ul class="hidden md:flex items-center gap-2 text-sm font-medium text-gray-300">
      <li>
        <a routerLink="/home" routerLinkActive="active-link" [routerLinkActiveOptions]="{ exact: true }"
          class="px-3 py-2 rounded-md hover:text-violet-400 hover:bg-gray-800/60 transition">Home</a>
      </li>
      <li>
        <a routerLink="/categories" routerLinkActive="active-link"
          class="px-3 py-2 rounded-md hover:text-violet-400 hover:bg-gray-800/60 transition">Categories</a>
      </li>
    </ul>

    <!-- Icon group + auth -->
    <div class="ml-auto flex items-center gap-3">
      <div class="flex items-center gap-2 bg-white/5 rounded-full px-2 py-1">
        <a routerLink="/wishlist" routerLinkActive="active-link" title="Wishlist"
          class="flex items-center justify-center w-10 h-10 rounded-full bg-transparent hover:bg-white/10 text-gray-300 hover:text-rose-400 transition">
          <i class="fas fa-heart text-lg"></i>
        </a>

        <a routerLink="/cart" routerLinkActive="active-link" title="Cart"
          class="relative flex items-center justify-center w-10 h-10 rounded-full bg-transparent hover:bg-white/10 text-gray-300 hover:text-violet-400 transition">
          <i class="fas fa-shopping-cart text-lg"></i>
          <span class="absolute -top-1.5 -right-1.5 text-[10px] font-semibold w-5 h-5 flex items-center justify-center rounded-full border border-[#1b1330] shadow-md bg-violet-500 text-white">
            {{ cartItemCount }}
          </span>
        </a>

        <a routerLink="/profile" routerLinkActive="active-link" title="Profile"
          class="flex items-center justify-center w-10 h-10 rounded-full bg-transparent hover:bg-white/10 text-gray-300 hover:text-violet-400 transition">
          <i class="fas fa-user text-lg"></i>
        </a>
      </div>

      <!-- Auth actions -->
      @if (!isLoggedIn) {
        <div class="hidden md:flex items-center gap-2">
          <a routerLink="/login" routerLinkActive="active-link"
            class="auth-button px-3 py-2 rounded-md text-gray-300 hover:text-violet-300 transition">Login</a>
          <a routerLink="/register" routerLinkActive="active-link"
            class="auth-button px-3 py-2 rounded-md bg-violet-600/70 hover:bg-violet-600 text-white transition">Register</a>
        </div>
      } @else {
        <button (click)="_AuthService.logOut()"
          class="auth-button px-3 py-2 rounded-md text-gray-300 hover:text-violet-300 transition">Logout</button>
      }
    </div>
  </div>
</nav>
