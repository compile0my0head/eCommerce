<section
  class="min-h-screen bg-[#0f071b] text-gray-100 py-12 px-4 flex flex-col items-center"
>
  <div class="w-full max-w-6xl space-y-8">
    <h1 class="text-3xl font-bold text-center text-violet-200 mb-10">
      Your Orders
    </h1>

    @if (orders.length > 0) {
      @for (order of orders; track order._id) {
        <div
          class="bg-[#1b1330]/60 border border-white/10 rounded-2xl p-6 shadow-[0_0_40px_-12px_rgba(165,125,255,0.25)]
                 transition-all duration-300 hover:shadow-[0_0_45px_-10px_rgba(165,125,255,0.35)]"
        >
          <!-- Header -->
          <div
            class="flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6"
          >
            <div>
              <p class="text-sm text-gray-400">Order ID:</p>
              <p class="text-violet-200 font-medium text-sm sm:text-base">
                {{ order._id }}
              </p>
            </div>
            <div class="text-sm mt-3 sm:mt-0">
              <span
                class="inline-block px-3 py-1 rounded-full text-xs font-semibold"
                [ngClass]="{
                  'bg-green-600/30 text-green-300 border border-green-500/50': order.isDelivered,
                  'bg-yellow-500/30 text-yellow-200 border border-yellow-500/50': !order.isDelivered && order.isPaid,
                  'bg-gray-600/30 text-gray-300 border border-gray-500/50': !order.isPaid
                }"
              >
                {{ getStatus(order) }}
              </span>
            </div>
          </div>

          <!-- Items -->
          <div class="divide-y divide-white/10">
            @for (item of order.cartItems; track item._id) {
              <div
                class="py-5 grid grid-cols-1 sm:grid-cols-[auto,1fr,auto] gap-6 items-center"
              >
                <!-- Image -->
                <div class="w-full sm:w-28 h-28 flex-shrink-0 mx-auto sm:mx-0">
                  <img
                    [src]="item.product.imageCover"
                    [alt]="item.product.title"
                    class="w-full h-full object-cover rounded-lg border border-white/10"
                  />
                </div>

                <!-- Info -->
                <div class="flex flex-col gap-2">
                  <h3 class="text-lg font-semibold text-white line-clamp-1">
                    {{ item.product.title }}
                  </h3>
                  <p class="text-sm text-gray-400">
                    Brand:
                    <span class="text-gray-200 font-medium">{{
                      item.product.brand.name
                    }}</span>
                  </p>
                  <p class="text-sm text-gray-400">
                    Category:
                    <span class="text-gray-200 font-medium">{{
                      item.product.category.name
                    }}</span>
                  </p>
                  <p class="text-sm text-gray-400">
                    Quantity:
                    <span class="text-gray-200 font-medium">{{
                      item.count
                    }}</span>
                  </p>
                </div>

                <!-- Price -->
                <div class="text-right">
                  <p class="text-lg font-semibold text-violet-300">
                    ${{ item.price * item.count }}
                  </p>
                </div>
              </div>
            }
          </div>

          <!-- Enhanced Order Summary -->
          <div
            class="mt-6 bg-[#120b23]/70 border border-violet-500/20 rounded-xl p-4 sm:p-6
                   backdrop-blur-sm transition-all duration-300 hover:border-violet-400/40"
          >
            <h3
              class="text-violet-300 font-semibold mb-3 text-lg tracking-wide flex items-center gap-2"
            >
              <i class="fas fa-receipt text-violet-400"></i> Order Summary
            </h3>

            <div class="grid grid-cols-1 sm:grid-cols-3 gap-4 text-sm sm:text-base">
              <!-- Payment -->
              <div
                class="flex flex-col bg-[#1c1335]/70 border border-white/10 rounded-lg p-3"
              >
                <span class="text-gray-400 text-xs uppercase tracking-wide"
                  >Payment</span
                >
                <span class="text-gray-100 font-medium mt-1 flex items-center gap-2">
                  <i class="fas fa-credit-card text-violet-400"></i>
                  {{ order.paymentMethodType | titlecase }}
                </span>
              </div>

              <!-- Total -->
              <div
                class="flex flex-col bg-[#1c1335]/70 border border-white/10 rounded-lg p-3"
              >
                <span class="text-gray-400 text-xs uppercase tracking-wide"
                  >Total</span
                >
                <span
                  class="text-violet-300 font-semibold mt-1 text-lg flex items-center gap-2"
                >
                  <i class="fas fa-dollar-sign text-violet-400"></i>
                  ${{ order.totalOrderPrice }}
                </span>
              </div>

              <!-- Address -->
              <div
                class="flex flex-col bg-[#1c1335]/70 border border-white/10 rounded-lg p-3"
              >
                <span class="text-gray-400 text-xs uppercase tracking-wide"
                  >Address</span
                >
                <span
                  class="text-gray-200 font-medium mt-1 flex items-center gap-2"
                >
                  <i class="fas fa-location-dot text-violet-400"></i>
                  {{ order.shippingAddress.city }},
                  {{ order.shippingAddress.details }}
                </span>
              </div>
            </div>

            <!-- Meta -->
            <div
              class="flex flex-col sm:flex-row justify-between items-start sm:items-center mt-4 text-xs text-gray-500 gap-2"
            >
              <p>Placed on {{ order.createdAt | date: 'medium' }}</p>
              <p>
                Tax: ${{ order.taxPrice }} |
                Shipping: ${{ order.shippingPrice }}
              </p>
            </div>
          </div>
        </div>
      }

      <!-- Continue Shopping -->
      <div class="flex justify-center mt-12">
        <a
          routerLink="/home"
          class="px-8 py-3 rounded-lg bg-transparent border border-violet-300 text-violet-300 hover:bg-violet-300 hover:text-gray-900 transition-all duration-300"
        >
          ← Continue Shopping
        </a>
      </div>
    } @else {
      <!-- Empty State -->
      <div class="text-center py-20 text-gray-400">
        <i class="fas fa-box-open text-6xl mb-6 text-gray-500/70"></i>
        <p class="text-lg">You don’t have any orders yet.</p>
        <a
          routerLink="/home"
          class="mt-6 inline-block px-6 py-3 bg-violet-500 text-white rounded-lg hover:bg-violet-400 transition-all duration-300"
        >
          Start Shopping
        </a>
      </div>
    }
  </div>
</section>
