import{a as E}from"./chunk-SFKET6CN.js";import{a as V,b as C,c as F,d as T,e as k,f as N,h as D,i as L,j as P,l as R}from"./chunk-3CLL7LMM.js";import"./chunk-SZXLN6HP.js";import{$a as h,A as v,Aa as a,Ba as y,Ia as x,La as b,W as s,ca as f,ea as c,gb as _,ia as d,ma as n,na as i,oa as p,sa as w,sb as S,ta as g,tb as M,z as u}from"./chunk-ABLYTEQI.js";import"./chunk-EQDQRRRY.js";var O=(e,o)=>({"is-valid":e,"is-invalid":o});function G(e,o){e&1&&(n(0,"p",16),a(1,"This field is required"),i())}function j(e,o){e&1&&(n(0,"p",16),a(1,"Code must be 6 characters long"),i())}function q(e,o){if(e&1&&(n(0,"div"),f(1,G,2,0,"p",16)(2,j,2,0,"p",16),i()),e&2){let l,t=g();s(),d((l=t.verifyCode.get("resetCode"))!=null&&l.getError("required")?1:(l=t.verifyCode.get("resetCode"))!=null&&l.getError("pattern")?2:-1)}}function I(e,o){e&1&&p(0,"i",11)}function z(e,o){if(e&1&&(n(0,"div",12),a(1),i()),e&2){let l=g();s(),y(l.errorMsg)}}function H(e,o){e&1&&(n(0,"div",13),a(1,"Code Verified!"),i())}var A=class e{isLoading=!1;successMsg=!1;errorMsg="";_AuthService=u(E);_Router=u(S);verifyCode=new k({resetCode:new N(null,[C.required,C.pattern(/^\w{6}$/)])});verifyCodeSubmit(){this.verifyCode.valid?(this.isLoading=!0,this._AuthService.setVerifyCode(this.verifyCode.value).subscribe({next:o=>{o.status==="Success"&&(this.isLoading=!1,this.errorMsg="",this.successMsg=!0,localStorage.setItem("resetStageAllowed","true"),setTimeout(()=>this._Router.navigate(["/forgot-password/reset-password"]),1500))},error:o=>{this.errorMsg=o.error.message,this.isLoading=!1}})):this.verifyCode.markAllAsTouched()}static \u0275fac=function(l){return new(l||e)};static \u0275cmp=v({type:e,selectors:[["app-verify-code"]],standalone:!0,features:[x],decls:24,vars:9,consts:[[1,"min-h-screen","flex","flex-col","justify-center","items-center","bg-gradient-to-b","from-purple-900","to-indigo-950","text-white","px-6"],[1,"mb-8","flex","flex-col","items-center"],[1,"w-16","h-16","bg-white/20","rounded-full","flex","items-center","justify-center","text-3xl","font-bold"],[1,"text-white"],[1,"mt-3","text-2xl","font-semibold","tracking-wide"],[1,"bg-white/10","backdrop-blur-xl","rounded-2xl","shadow-2xl","p-8","w-full","max-w-md","border","border-white/10"],[1,"text-xl","font-bold","text-center","mb-6"],[1,"space-y-5",3,"ngSubmit","formGroup"],[1,"block","mb-1","text-sm","text-gray-300"],["formControlName","resetCode","type","text","placeholder","6-digit code",1,"w-full","px-4","py-2","rounded-xl","bg-white/20","text-white","placeholder-gray-400","focus:outline-none","focus:ring-2","focus:ring-purple-500","transition",3,"ngClass"],["type","submit",1,"w-full","mt-3","py-2","bg-purple-600","hover:bg-purple-700","rounded-xl","font-semibold","text-white","transition","transform","hover:scale-[1.02]","active:scale-95"],[1,"fas","fa-spin","fa-spinner","text-red-300"],[1,"mt-4","bg-rose-100/70","border","border-rose-300/50","text-rose-700","text-sm","px-4","py-3","rounded-xl"],[1,"mt-4","bg-green-100/70","border","border-green-300/50","text-green-800","text-sm","px-4","py-3","rounded-xl"],[1,"text-sm","text-center","text-gray-300","mt-6"],["routerLink","/login",1,"text-purple-400","hover:text-purple-300","underline"],[1,"text-red-400"]],template:function(l,t){if(l&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"span",3),a(4,"\u{1F6CD}\uFE0F"),i()(),n(5,"h1",4),a(6,"MyShop"),i()(),n(7,"div",5)(8,"h2",6),a(9,"Verify Reset Code"),i(),n(10,"form",7),w("ngSubmit",function(){return t.verifyCodeSubmit()}),n(11,"div")(12,"label",8),a(13,"Verification Code"),i(),p(14,"input",9),i(),f(15,q,3,1,"div"),n(16,"button",10),f(17,I,1,0,"i",11),a(18," Verify Code "),i(),f(19,z,2,1,"div",12)(20,H,2,0,"div",13),i(),n(21,"p",14)(22,"a",15),a(23,"Back to Login"),i()()()()),l&2){let r,m;s(10),c("formGroup",t.verifyCode),s(4),c("ngClass",b(6,O,!((r=t.verifyCode.get("resetCode"))!=null&&r.errors)&&(((r=t.verifyCode.get("resetCode"))==null?null:r.dirty)||((r=t.verifyCode.get("resetCode"))==null?null:r.touched)),((r=t.verifyCode.get("resetCode"))==null?null:r.errors)&&(((r=t.verifyCode.get("resetCode"))==null?null:r.dirty)||((r=t.verifyCode.get("resetCode"))==null?null:r.touched)))),s(),d((m=t.verifyCode.get("resetCode"))!=null&&m.errors&&((m=t.verifyCode.get("resetCode"))!=null&&m.touched)?15:-1),s(2),d(t.isLoading?17:-1),s(2),d(t.errorMsg?19:-1),s(),d(t.successMsg?20:-1)}},dependencies:[_,h,R,D,V,F,T,L,P,M],styles:[".is-valid[_ngcontent-%COMP%]{--tw-border-opacity: 1;border-color:rgb(74 222 128 / var(--tw-border-opacity, 1));background-color:#14532d33;--tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(1px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow, 0 0 #0000);--tw-ring-color: rgb(74 222 128 / .5);transition-property:all;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.3s}@keyframes _ngcontent-%COMP%_pulse{50%{opacity:.5}}.is-invalid[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_pulse 2s cubic-bezier(.4,0,.6,1) infinite;--tw-border-opacity: 1;border-color:rgb(248 113 113 / var(--tw-border-opacity, 1));background-color:#ef444433;--tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(1px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow, 0 0 #0000);--tw-ring-color: rgb(248 113 113 / .5);animation:_ngcontent-%COMP%_pulse 1.5s ease-in-out infinite}.animate-pulse[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_pulse 1.5s ease-in-out infinite}"]})};export{A as VerifyCodeComponent};
